[0;32mCMD> [0mbash tools/cmake/cmake-generate-proto-py-host.sh
CMAKE_VERSION: 3.22.1
CROSSTOOL_ROOT:
CMAKE_TOOLCHAIN_FILE:
CMAKE_INSTALL_PREFIX: /home/NIO/mace/build/cmake-build/host/install
MACE_ENABLE_CPU            = ON
MACE_ENABLE_NEON           = OFF
MACE_ENABLE_QUANTIZE       = OFF
MACE_ENABLE_OPENCL         = OFF
MACE_ENABLE_CUDA           = OFF
MACE_ENABLE_HEXAGON_DSP    = OFF
MACE_ENABLE_HEXAGON_HTA    = OFF
MACE_ENABLE_MTK_APU        = OFF
MACE_ENABLE_BFLOAT16       = OFF
MACE_ENABLE_FP16           = OFF
MACE_ENABLE_QNN            =
MACE_ENABLE_TESTS          = ON
MACE_ENABLE_BENCHMARKS     = ON
MACE_ENABLE_OPT_SIZE       = ON
MACE_ENABLE_OBFUSCATE      = ON
MACE_ENABLE_CCACHE         = ON
MACE_ENABLE_CODE_MODE      = OFF
MACE_ENABLE_RPCMEM         = OFF
-- Configuring done
-- Generating done
-- Build files have been written to: /home/NIO/mace/build/cmake-build/host
[ 66%] Built target protoc_bin
[100%] Built target mace_proto_py
[ 66%] Built target protoc_bin
[100%] Built target micro_mem_proto_py

tools/python/run_model.py:76: Run on devices: ['host']
tools/python/run_model.py:90: Run model combine_qkv
[92m{'platform': <Platform.ONNX: 2>, 'model_file_path': '/home/NIO/llm/transformer/onnxModel/CombineQKV_1_144_128_sim.onnx', 'model_sha256_checksum': '2949f49cb763336262f8ab38a833f87efc762e4ed5c148ff9d24e212af9ef348', 'subgraphs': {'default_graph': {'platform': <Platform.ONNX: 2>, 'model_file_path': '/home/NIO/llm/transformer/onnxModel/CombineQKV_1_144_128_sim.onnx', 'model_sha256_checksum': '2949f49cb763336262f8ab38a833f87efc762e4ed5c148ff9d24e212af9ef348', 'runtime': <DeviceType.CPU: 0>, 'limit_opencl_kernel_time': 0, 'nnlib_graph_mode': 0, 'obfuscate': 0, 'input_data_formats': [<DataFormat.NONE: 0>], 'input_ranges': [[-1.0, 1.0]], 'output_data_formats': [<DataFormat.NONE: 0>], 'input_tensors': ['input'], 'output_tensors': ['output'], 'validation_inputs_data': ['/home/NIO/llm/transformer/onnxModel/tensor_data/input_1_144_128.raw'], 'input_shapes': [[1, 144, 128]], 'input_data_types': [1], 'output_shapes': [[1, 144, 128]], 'output_data_types': [1], 'backend': ['pytorch'], 'data_type': 3}}, 'runtime': <DeviceType.CPU: 0>, 'limit_opencl_kernel_time': 0, 'nnlib_graph_mode': 0, 'obfuscate': 0, 'input_data_formats': [], 'input_ranges': [], 'output_data_formats': [], 'input_tensors': ['input'], 'output_tensors': ['output'], 'validation_inputs_data': ['/home/NIO/llm/transformer/onnxModel/tensor_data/input_1_144_128.raw']}[0m
[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv/interior

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv/interior

[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo cp -f build/combine_qkv/model/combine_qkv.pb /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo cp -f build/combine_qkv/model/combine_qkv.data /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv/validate_in

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv/validate_in

[0;32mCMD> [0msudo cp -f /tmp/tmpdqm0_yxc/* /tmp/mace_run/combine_qkv/validate_in

[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv/validate_out

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv/validate_out

Install target from build/cmake-build/host/install/bin/mace_run to /tmp/mace_run/combine_qkv
[0;32mCMD> [0msudo mkdir -p /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo chmod 777 /tmp/mace_run/combine_qkv

[0;32mCMD> [0msudo cp -f build/cmake-build/host/install/bin/mace_run /tmp/mace_run/combine_qkv

['', 'MACE_INTERNAL_STORAGE_PATH=/tmp/mace_run/combine_qkv/interior', 'MACE_CPP_MIN_VLOG_LEVEL=0', 'MACE_LOG_TENSOR_RANGE=1', 'LD_LIBRARY_PATH=/tmp/mace_run/combine_qkv', '/tmp/mace_run/combine_qkv/mace_run', "--model_name='combine_qkv'", "--model_file='/tmp/mace_run/combine_qkv/combine_qkv.pb'", "--model_data_file='/tmp/mace_run/combine_qkv/combine_qkv.data'", "--input_node='input'", "--input_shape='1,144,128'", "--output_node='output'", "--output_shape='1,144,128'", "--input_data_format='NONE'", "--output_data_format='NONE'", "--input_data_type='1'", "--output_data_type='1'", '--input_dir=/home/NIO/llm/transformer/onnxModel/tensor_data', '--output_dir=', '--input_file=/tmp/mace_run/combine_qkv/validate_in/combine_qkv', '--output_file=/tmp/mace_run/combine_qkv/validate_out/combine_qkv']
[0;32mCMD> [0m MACE_INTERNAL_STORAGE_PATH=/tmp/mace_run/combine_qkv/interior MACE_CPP_MIN_VLOG_LEVEL=0 MACE_LOG_TENSOR_RANGE=1 LD_LIBRARY_PATH=/tmp/mace_run/combine_qkv /tmp/mace_run/combine_qkv/mace_run --model_name='combine_qkv' --model_file='/tmp/mace_run/combine_qkv/combine_qkv.pb' --model_data_file='/tmp/mace_run/combine_qkv/combine_qkv.data' --input_node='input' --input_shape='1,144,128' --output_node='output' --output_shape='1,144,128' --input_data_format='NONE' --output_data_format='NONE' --input_data_type='1' --output_data_type='1' --input_dir=/home/NIO/llm/transformer/onnxModel/tensor_data --output_dir= --input_file=/tmp/mace_run/combine_qkv/validate_in/combine_qkv --output_file=/tmp/mace_run/combine_qkv/validate_out/combine_qkv
I /home/NIO/mace/mace/tools/mace_run.cc:705] hello
I /home/NIO/mace/mace/tools/mace_run.cc:725] model name: combine_qkv
I /home/NIO/mace/mace/tools/mace_run.cc:726] mace version: v1.1.1-68-g23d5d03
I /home/NIO/mace/mace/tools/mace_run.cc:727] input node: input
I /home/NIO/mace/mace/tools/mace_run.cc:728] input shape: 1,144,128
I /home/NIO/mace/mace/tools/mace_run.cc:729] input data_type: 1
I /home/NIO/mace/mace/tools/mace_run.cc:730] input data_format: NONE
I /home/NIO/mace/mace/tools/mace_run.cc:733] input data_type: 1
I /home/NIO/mace/mace/tools/mace_run.cc:734] output data_format: NONE
I /home/NIO/mace/mace/tools/mace_run.cc:735] input_file: /tmp/mace_run/combine_qkv/validate_in/combine_qkv
I /home/NIO/mace/mace/tools/mace_run.cc:736] output_file: /tmp/mace_run/combine_qkv/validate_out/combine_qkv
I /home/NIO/mace/mace/tools/mace_run.cc:737] input dir: /home/NIO/llm/transformer/onnxModel/tensor_data
I /home/NIO/mace/mace/tools/mace_run.cc:738] output dir:
I /home/NIO/mace/mace/tools/mace_run.cc:739] model_data_file: /tmp/mace_run/combine_qkv/combine_qkv.data
I /home/NIO/mace/mace/tools/mace_run.cc:740] model_file: /tmp/mace_run/combine_qkv/combine_qkv.pb
I /home/NIO/mace/mace/tools/mace_run.cc:741] accelerator_cache_policy: 0
I /home/NIO/mace/mace/tools/mace_run.cc:742] accelerator_binary_file:
I /home/NIO/mace/mace/tools/mace_run.cc:743] accelerator_storage_file:
I /home/NIO/mace/mace/tools/mace_run.cc:744] apu_boost_hint: 100
I /home/NIO/mace/mace/tools/mace_run.cc:745] apu_preference_hint: 1
I /home/NIO/mace/mace/tools/mace_run.cc:746] round: 1
I /home/NIO/mace/mace/tools/mace_run.cc:747] restart_round: 1
I /home/NIO/mace/mace/tools/mace_run.cc:748] gpu_perf_hint: 3
I /home/NIO/mace/mace/tools/mace_run.cc:749] gpu_priority_hint: 3
I /home/NIO/mace/mace/tools/mace_run.cc:750] num_threads: -1
I /home/NIO/mace/mace/tools/mace_run.cc:751] cpu_affinity_policy: 1
I /home/NIO/mace/mace/tools/mace_run.cc:820] restart round 0
E /home/NIO/mace/mace/port/linux_base/env.cc:87] failed to open /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq
E /home/NIO/mace/mace/utils/thread_pool.cc:154] Fail to get cpu max frequencies
E /home/NIO/mace/mace/utils/thread_pool.cc:82] CPU core is empty
I /home/NIO/mace/mace/libmace/engines/serial_engine.cc:33] Creating SerialEngine, MACE version: v1.1.1-68-g23d5d03
E /home/NIO/mace/mace/port/linux_base/env.cc:87] failed to open /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq
I /home/NIO/mace/mace/runtimes/cpu/cpu_runtime.cc:76] GetCPUMaxFreq(&cpu_max_freqs) failed with error: Runtime error
I /home/NIO/mace/mace/tools/mace_run.cc:463] Create Mace Engine latency: 3.712 ms
I /home/NIO/mace/mace/tools/mace_run.cc:470] Total init latency: 3.742 ms
I /home/NIO/mace/mace/tools/mace_run.cc:316] runtimes: [CPU]
I /home/NIO/mace/mace/tools/mace_run.cc:487] intput_file: /tmp/mace_run/combine_qkv/validate_in/combine_qkv_input
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@6@@-1.26125,1.21083
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@7@@-1.22075,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@27@@-1.22075,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@28@@-1.22075,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@37@@-1.22075,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@38@@-1.22075,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@39@@-1.22075,1.08454
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@40@@-1.14348,1.16148
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@41@@-1.1142,1.22141
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@42@@-1.14348,1.16148
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@43@@-1.75153,3.4159
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@45@@-0.30963,0.603852
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@46@@0.00550434,0.0088475
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@47@@-0.510481,0.650907
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@54@@-0.510481,0.650907
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@60@@-0.510481,0.650907
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@62@@-0.345115,0.333048
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@output@@-0.383274,0.326705
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@6@@-1.2684,1.28578
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@7@@-1.22791,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@27@@-1.22791,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@28@@-1.22791,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@37@@-1.22791,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@38@@-1.22791,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@39@@-1.22791,1.05963
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@40@@-1.04349,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@41@@-1.00021,1.0095
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@42@@-1.04349,1.20351
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@43@@-1.76966,3.51113
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@45@@-0.312834,0.620687
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@46@@0.00541628,0.00880147
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@47@@-0.514145,0.632705
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@54@@-0.514145,0.632705
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@60@@-0.514145,0.632705
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@62@@-0.360566,0.316626
I /home/NIO/mace/mace/core/net/serial_net.cc:199] Tensor range @@output@@-0.381868,0.314553

